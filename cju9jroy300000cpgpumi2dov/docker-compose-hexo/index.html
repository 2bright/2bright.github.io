<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>docker-compose-hexo（用docker搭建hexo博客） | 半人生</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="本文介绍 docker-compose-hexo，一个用 docker 和 docker-compose 在 ubuntu 上搭建 hexo 博客的简单项目。如果你不了解 hexo，可先查阅 hexo官方文档。如果你平时也使用 docker 和 docker-compose，并且熟悉 linux 系统，那么 docker-compose-hexo 对你非常简单，否则学习 docker 和 dock">
<meta name="keywords" content="hexo,docker,docker-compose,bash">
<meta property="og:type" content="article">
<meta property="og:title" content="docker-compose-hexo（用docker搭建hexo博客）">
<meta property="og:url" content="http://2bright.github.io/cju9jroy300000cpgpumi2dov/docker-compose-hexo/index.html">
<meta property="og:site_name" content="半人生">
<meta property="og:description" content="本文介绍 docker-compose-hexo，一个用 docker 和 docker-compose 在 ubuntu 上搭建 hexo 博客的简单项目。如果你不了解 hexo，可先查阅 hexo官方文档。如果你平时也使用 docker 和 docker-compose，并且熟悉 linux 系统，那么 docker-compose-hexo 对你非常简单，否则学习 docker 和 dock">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-04-09T08:36:56.161Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="docker-compose-hexo（用docker搭建hexo博客）">
<meta name="twitter:description" content="本文介绍 docker-compose-hexo，一个用 docker 和 docker-compose 在 ubuntu 上搭建 hexo 博客的简单项目。如果你不了解 hexo，可先查阅 hexo官方文档。如果你平时也使用 docker 和 docker-compose，并且熟悉 linux 系统，那么 docker-compose-hexo 对你非常简单，否则学习 docker 和 dock">
  
    <link rel="alternate" href="/atom.xml" title="半人生" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">半人生</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">不得永生，为何奋斗！</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://2bright.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-docker-compose-hexo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/cju9jroy300000cpgpumi2dov/docker-compose-hexo/" class="article-date">
  <time datetime="2019-04-09T08:41:14.261Z" itemprop="datePublished">2019-04-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      docker-compose-hexo（用docker搭建hexo博客）
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>本文介绍 <a href="https://github.com/2bright/docker-compose-hexo" target="_blank" rel="noopener">docker-compose-hexo</a>，一个用 <a href="https://www.docker.com" target="_blank" rel="noopener">docker</a> 和 <a href="https://docs.docker.com/compose" target="_blank" rel="noopener">docker-compose</a> 在 ubuntu 上搭建 <a href="https://hexo.io" target="_blank" rel="noopener">hexo</a> 博客的简单项目。如果你不了解 hexo，可先查阅 <a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">hexo官方文档</a>。如果你平时也使用 docker 和 docker-compose，并且熟悉 linux 系统，那么 docker-compose-hexo 对你非常简单，否则学习 docker 和 docker-compose 可能要花费你一些时间。</p>
<h2 id="安装前提"><a href="#安装前提" class="headerlink" title="安装前提"></a>安装前提</h2><ul>
<li>git</li>
<li>docker</li>
<li>docker-compose</li>
<li>ubuntu</li>
</ul>
<h2 id="安装hexo博客"><a href="#安装hexo博客" class="headerlink" title="安装hexo博客"></a>安装hexo博客</h2><p>如果满足安装前提，那么只需要3个简单的步骤就可以让hexo博客运行起来，然后正式开始编写博客文章。<br>安装过程需要下载软件包，花多少时间就看你的网络状况了。</p>
<h4 id="1-获取docker-compose-hexo项目"><a href="#1-获取docker-compose-hexo项目" class="headerlink" title="1. 获取docker-compose-hexo项目"></a>1. 获取docker-compose-hexo项目</h4><p>假设你把项目放到路径<code>~/docker-compose-hexo</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/2bright/docker-compose-hexo ~/docker-compose-hexo</span><br></pre></td></tr></table></figure>
<h4 id="2-设置PATH环境变量"><a href="#2-设置PATH环境变量" class="headerlink" title="2. 设置PATH环境变量"></a>2. 设置PATH环境变量</h4><p>修改 <code>~/.bashrc</code> 文件，添加 <code>~/docker-compose-hexo/scripts</code> 到PATH变量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;export PATH=$PATH:~/docker-compose-hexo/scripts&apos; &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>执行下面的命令让 PATH 变量生效。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>
<h4 id="3-运行docker-compose-hexo"><a href="#3-运行docker-compose-hexo" class="headerlink" title="3. 运行docker-compose-hexo"></a>3. 运行docker-compose-hexo</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo-start</span><br></pre></td></tr></table></figure>
<p>第一次运行会自动安装相关软件，需要等待较长时间，具体花多长时间依赖于你的网络状况。安装过程可能因为网络问题而失败，如果你不幸遇到，可以尝试重新安装。<br>可在 docker-compose-hexo 目录下用 <code>docker-compose logs</code> 查看日志，如果出现 <code>Hexo is running at http://localhost:4000</code> 则已安装并启动完成。</p>
<p>启动完成后，打开浏览器访问 <code>http://your_server_ip:4000</code>，验证是否安装成功。如果你在本地PC机上部署的hexo，那么 your_server_ip 替换成 localhost，如果使用云服务器，则换成服务器IP。</p>
<h2 id="编写hexo博客文章"><a href="#编写hexo博客文章" class="headerlink" title="编写hexo博客文章"></a>编写hexo博客文章</h2><h4 id="新建文章"><a href="#新建文章" class="headerlink" title="新建文章"></a>新建文章</h4><p>下面新建一篇标题为 “用docker搭建hexo博客” 的文章。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo-new &quot;用docker搭建hexo博客&quot;</span><br></pre></td></tr></table></figure>
<p>新建的文章放在 <code>~/docker-compose-hexo/blog/source/_posts</code> 目录下。</p>
<h4 id="编辑文章"><a href="#编辑文章" class="headerlink" title="编辑文章"></a>编辑文章</h4><p>用任何一款文本编辑器打开 <code>~/docker-compose-hexo/blog/source/_posts</code> 目录下的文件进行查看和编辑。<br>hexo支持Markdown语法。</p>
<h4 id="在浏览器上查看文章"><a href="#在浏览器上查看文章" class="headerlink" title="在浏览器上查看文章"></a>在浏览器上查看文章</h4><p>访问 <a href="http://your_server_ip:4000" target="_blank" rel="noopener">http://your_server_ip:4000</a> ，查看你的博客。<br>hexo服务器会监控 <code>_posts</code> 目录下的变动，你新建或修改了文章，刷新页面就可以看到变化。</p>
<h2 id="配置博客"><a href="#配置博客" class="headerlink" title="配置博客"></a>配置博客</h2><p>修改 <code>~/docker-compose-hexo/blog/_config.yml</code> 文件，配置博客主题等信息。<br>如果文件所属用户是root，可执行 <code>hexo-restart</code>，所属用户将更新为当前用户。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">title: 博客主题</span><br><span class="line">subtitle: 博客副标题</span><br><span class="line">description: </span><br><span class="line">keywords: </span><br><span class="line">author: 姓名</span><br><span class="line">language: zh-CN</span><br><span class="line">timezone: Asia/Shanghai</span><br><span class="line">url: 博客地址</span><br></pre></td></tr></table></figure>
<p>重启 docker-compose-hexo 让新配置生效。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo-restart</span><br></pre></td></tr></table></figure>
<h2 id="部署hexo博客到GitHub-Pages"><a href="#部署hexo博客到GitHub-Pages" class="headerlink" title="部署hexo博客到GitHub Pages"></a>部署hexo博客到GitHub Pages</h2><p><a href="https://pages.github.com" target="_blank" rel="noopener">GitHub Pages</a>可以帮你托管博客文章。hexo提供了简单的配置和命令，帮助你快速部署博客到GitHub Pages。</p>
<h3 id="配置hexo支持GitHub-Pages"><a href="#配置hexo支持GitHub-Pages" class="headerlink" title="配置hexo支持GitHub Pages"></a>配置hexo支持GitHub Pages</h3><p>配置hexo支持GitHub Pages需要6个简单的步骤。如果你已经有github账号并且熟悉github的使用，下面的步骤就更简单了。</p>
<h4 id="1-github账号"><a href="#1-github账号" class="headerlink" title="1. github账号"></a>1. github账号</h4><p>要使用GitHub Pages发布博客，当然需要一个github账号。如果你还没有，就 <a href="https://github.com" target="_blank" rel="noopener">去注册一个</a> 吧。</p>
<h4 id="2-GitHub-Pages仓库"><a href="#2-GitHub-Pages仓库" class="headerlink" title="2. GitHub Pages仓库"></a>2. GitHub Pages仓库</h4><p>在github上创建一个仓库（repository），仓库必需命名为 “username.github.io”，username 替换成你的github用户名。</p>
<h4 id="3-配置hexo"><a href="#3-配置hexo" class="headerlink" title="3. 配置hexo"></a>3. 配置hexo</h4><p>修改 <code>~/docker-compose-hexo/blog/_config.yml</code> 配置文件的 deploy 配置段如下，username 替换成你的github用户名。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:username/username.github.io.git</span><br></pre></td></tr></table></figure>
<h4 id="4-设置docker容器中的git用户邮箱和用户名"><a href="#4-设置docker容器中的git用户邮箱和用户名" class="headerlink" title="4. 设置docker容器中的git用户邮箱和用户名"></a>4. 设置docker容器中的git用户邮箱和用户名</h4><p>复制 <code>~/docker-compose-hexo/.env.example</code> 为 <code>~/docker-compose-hexo/.env</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/docker-compose-hexo</span><br><span class="line">cp .env.example .env</span><br></pre></td></tr></table></figure>
<p>修改 <code>.env</code> 文件。注意加引号。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GIT_USER_EMAIL=&quot;你的邮箱&quot;</span><br><span class="line">GIT_USER_NAME=&quot;你的姓名&quot;</span><br></pre></td></tr></table></figure>
<p>这两个变量用在docker容器中执行 <code>git config --global user.email &quot;$GIT_USER_EMAIL&quot;</code> 和 <code>git config --global user.name &quot;$GIT_USER_NAME&quot;</code>。</p>
<h4 id="5-生成docker容器中的ssh-key"><a href="#5-生成docker容器中的ssh-key" class="headerlink" title="5. 生成docker容器中的ssh key"></a>5. 生成docker容器中的ssh key</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/docker-compose-hexo/scripts/internal/generate_ssh_key</span><br></pre></td></tr></table></figure>
<p>生成的 ssh key 保存在 <code>~/docker-compose-hexo/ssh</code> 目录中，下一个步骤需要使用其中的 <code>id_rsa.pub</code> 文件。</p>
<h4 id="6-在github账号添加ssh-key"><a href="#6-在github账号添加ssh-key" class="headerlink" title="6. 在github账号添加ssh key"></a>6. 在github账号添加ssh key</h4><p>复制刚创建的 <code>id_rsa.pub</code> 文件的内容，<a href="https://github.com/settings/keys" target="_blank" rel="noopener">添加到你的github账号</a>。</p>
<h3 id="一键部署博客到GitHub-Pages"><a href="#一键部署博客到GitHub-Pages" class="headerlink" title="一键部署博客到GitHub Pages"></a>一键部署博客到GitHub Pages</h3><p>如果你执行完了上面的配置，需要部署博客到GitHub Pages时，执行下面的命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo-deploy</span><br></pre></td></tr></table></figure>
<p>如果一切正常，你的博客会被上传到GitHub Pages仓库。访问你的GitHub Pages仓库，看是否有新的commit。用浏览器访问自己的GitHub Pages域名<code>username.github.io</code>，看是否更新。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>docker-compose-hexo是一个用docker部署hexo博客的项目，提供非常简单的使用接口。<br>本文介绍了 docker-compose-hexo 和 hexo 的简单使用，希望能帮助你快速上手使用 hexo 博客。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://2bright.github.io/cju9jroy300000cpgpumi2dov/docker-compose-hexo/" data-id="cju9jroy300000cpgpumi2dov" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bash/">bash</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker-compose/">docker-compose</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

    </footer>
  </div>
  
    
  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/bash/">bash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker-compose/">docker-compose</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/bash/" style="font-size: 10px;">bash</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/docker-compose/" style="font-size: 10px;">docker-compose</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/cju9jroy300000cpgpumi2dov/docker-compose-hexo/">docker-compose-hexo（用docker搭建hexo博客）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 半人生<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>